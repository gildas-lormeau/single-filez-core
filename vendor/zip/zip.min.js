((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).zip={})})(this,(function(e){"use strict";const{Array:t,Object:n,String:r,Number:s,BigInt:a,Math:i,Date:o,Map:c,Set:l,Response:u,URL:f,Error:h,Uint8Array:d,Uint16Array:p,Uint32Array:w,DataView:g,Blob:y,Promise:m,TextEncoder:b,TextDecoder:v,document:S,crypto:k,btoa:R,TransformStream:_,ReadableStream:z,WritableStream:D,CompressionStream:x,DecompressionStream:T,navigator:E,Worker:F}="undefined"!=typeof globalThis?globalThis:this||self;var U=d,A=p,C=Int32Array,O=new U([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W=new U([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),L=new U([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N=(e,t)=>{for(var n=new A(31),r=0;31>r;++r)n[r]=t+=1<<e[r-1];var s=new C(n[30]);for(r=1;30>r;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},I=N(O,2),P=I.b,H=I.r;P[28]=258,H[258]=28;for(var M=N(W,0),B=M.b,q=M.r,V=new A(32768),Z=0;32768>Z;++Z){var K=(43690&Z)>>1|(21845&Z)<<1;K=(61680&(K=(52428&K)>>2|(13107&K)<<2))>>4|(3855&K)<<4,V[Z]=((65280&K)>>8|(255&K)<<8)>>1}var j=(e,t,n)=>{for(var r=e.length,s=0,a=new A(t);r>s;++s)e[s]&&++a[e[s]-1];var i,o=new A(t);for(s=1;t>s;++s)o[s]=o[s-1]+a[s-1]<<1;if(n){i=new A(1<<t);var c=15-t;for(s=0;r>s;++s)if(e[s])for(var l=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,h=f|(1<<u)-1;h>=f;++f)i[V[f]>>c]=l}else for(i=new A(r),s=0;r>s;++s)e[s]&&(i[s]=V[o[e[s]-1]++]>>15-e[s]);return i},G=new U(288);for(Z=0;144>Z;++Z)G[Z]=8;for(Z=144;256>Z;++Z)G[Z]=9;for(Z=256;280>Z;++Z)G[Z]=7;for(Z=280;288>Z;++Z)G[Z]=8;var X=new U(32);for(Z=0;32>Z;++Z)X[Z]=5;var Y=j(G,9,0),J=j(G,9,1),Q=j(X,5,0),$=j(X,5,1),ee=e=>{for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},te=(e,t,n)=>{var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ne=(e,t)=>{var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},re=e=>(e+7)/8|0,se=(e,t,n)=>{(null==t||0>t)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new U(n-t);return r.set(e.subarray(t,n)),r},ae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ie=(e,t,n)=>{var r=new h(t||ae[e]);if(r.code=e,h.captureStackTrace&&h.captureStackTrace(r,ie),!n)throw r;return r},oe=(e,t,n)=>{n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ce=(e,t,n)=>{n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},le=(e,t)=>{for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return{t:ge,l:0};if(1==s){var i=new U(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(((e,t)=>e.f-t.f)),n.push({s:-1,f:25001});var o=n[0],c=n[1],l=0,u=1,f=2;for(n[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=s-1;)o=n[n[l].f<n[f].f?l++:f++],c=n[l!=u&&n[l].f<n[f].f?l++:f++],n[u++]={s:-1,f:o.f+c.f,l:o,r:c};var h=a[0].s;for(r=1;s>r;++r)a[r].s>h&&(h=a[r].s);var d=new A(h+1),p=ue(n[u-1],d,0);if(p>t){r=0;var w=0,g=p-t,y=1<<g;for(a.sort(((e,t)=>d[t.s]-d[e.s]||e.f-t.f));s>r;++r){var m=a[r].s;if(d[m]<=t)break;w+=y-(1<<p-d[m]),d[m]=t}for(w>>=g;w>0;){var b=a[r].s;d[b]<t?w-=1<<t-d[b]++-1:++r}for(;r>=0&&w;--r){var v=a[r].s;d[v]==t&&(--d[v],++w)}p=t}return{t:new U(d),l:p}},ue=(e,t,n)=>-1==e.s?i.max(ue(e.l,t,n+1),ue(e.r,t,n+1)):t[e.s]=n,fe=e=>{for(var t=e.length;t&&!e[--t];);for(var n=new A(++t),r=0,s=e[0],a=1,i=e=>{n[r++]=e},o=1;t>=o;++o)if(e[o]==s&&o!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=e[o]}return{c:n.subarray(0,r),n:t}},he=(e,t)=>{for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},de=(e,t,n)=>{var r=n.length,s=re(t+2);e[s]=255&r,e[s+1]=r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;r>a;++a)e[s+a+4]=n[a];return 8*(s+4+r)},pe=(e,t,n,r,s,a,i,o,c,l,u)=>{oe(t,u++,n),++s[256];for(var f=le(s,15),h=f.t,d=f.l,p=le(a,15),w=p.t,g=p.l,y=fe(h),m=y.c,b=y.n,v=fe(w),S=v.c,k=v.n,R=new A(19),_=0;_<m.length;++_)++R[31&m[_]];for(_=0;_<S.length;++_)++R[31&S[_]];for(var z=le(R,7),D=z.t,x=z.l,T=19;T>4&&!D[L[T-1]];--T);var E,F,U,C,N=l+5<<3,I=he(s,G)+he(a,X)+i,P=he(s,h)+he(a,w)+i+14+3*T+he(R,D)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&I>=N&&P>=N)return de(t,u,e.subarray(c,c+l));if(oe(t,u,1+(I>P)),u+=2,I>P){E=j(h,d,0),F=h,U=j(w,g,0),C=w;var H=j(D,x,0);for(oe(t,u,b-257),oe(t,u+5,k-1),oe(t,u+10,T-4),u+=14,_=0;T>_;++_)oe(t,u+3*_,D[L[_]]);u+=3*T;for(var M=[m,S],B=0;2>B;++B){var q=M[B];for(_=0;_<q.length;++_){var V=31&q[_];oe(t,u,H[V]),u+=D[V],V>15&&(oe(t,u,q[_]>>5&127),u+=q[_]>>12)}}}else E=Y,F=G,U=Q,C=X;for(_=0;o>_;++_){var Z=r[_];if(Z>255){ce(t,u,E[257+(V=Z>>18&31)]),u+=F[V+257],V>7&&(oe(t,u,Z>>23&31),u+=O[V]);var K=31&Z;ce(t,u,U[K]),u+=C[K],K>3&&(ce(t,u,Z>>5&8191),u+=W[K])}else ce(t,u,E[Z]),u+=F[Z]}return ce(t,u,E[256]),u+F[256]},we=new C([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ge=new U(0),ye=function(){function e(e,t){if("function"==typeof e&&(t=e,e={}),this.ondata=t,this.o=e||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new U(98304),this.o.dictionary){var n=this.o.dictionary.subarray(-32768);this.b.set(n,32768-n.length),this.s.i=32768-n.length}}return e.prototype.p=function(e,t){this.ondata(((e,t,n,r,s)=>{if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new U(a.length+e.length);o.set(a),o.set(e,a.length),e=o,s.w=a.length}return((e,t,n,r,s,a)=>{var o=a.z||e.length,c=new U(0+o+5*(1+i.ceil(o/7e3))+0),l=c.subarray(0,c.length-0),u=a.l,f=7&(a.r||0);if(t){f&&(l[0]=a.r>>3);for(var h=we[t-1],d=h>>13,p=8191&h,w=(1<<n)-1,g=a.p||new A(32768),y=a.h||new A(w+1),m=i.ceil(n/3),b=2*m,v=t=>(e[t]^e[t+1]<<m^e[t+2]<<b)&w,S=new C(25e3),k=new A(288),R=new A(32),_=0,z=0,D=a.i||0,x=0,T=a.w||0,E=0;o>D+2;++D){var F=v(D),L=32767&D,N=y[F];if(g[L]=N,y[F]=L,D>=T){var I=o-D;if((_>7e3||x>24576)&&(I>423||!u)){f=pe(e,l,0,S,k,R,z,x,E,D-E,f),x=_=z=0,E=D;for(var P=0;286>P;++P)k[P]=0;for(P=0;30>P;++P)R[P]=0}var M=2,B=0,V=p,Z=L-N&32767;if(I>2&&F==v(D-Z))for(var K=i.min(d,I)-1,j=i.min(32767,D),G=i.min(258,I);j>=Z&&--V&&L!=N;){if(e[D+M]==e[D+M-Z]){for(var X=0;G>X&&e[D+X]==e[D+X-Z];++X);if(X>M){if(M=X,B=Z,X>K)break;var Y=i.min(Z,X-2),J=0;for(P=0;Y>P;++P){var Q=D-Z+P&32767,$=Q-g[Q]&32767;$>J&&(J=$,N=Q)}}}Z+=(L=N)-(N=g[L])&32767}if(B){S[x++]=268435456|H[M]<<18|q[B];var ee=31&H[M],te=31&q[B];z+=O[ee]+W[te],++k[257+ee],++R[te],T=D+M,++_}else S[x++]=e[D],++k[e[D]]}}for(D=i.max(D,T);o>D;++D)S[x++]=e[D],++k[e[D]];f=pe(e,l,u,S,k,R,z,x,E,D-E,f),u||(a.r=7&f|l[f/8|0]<<3,f-=7,a.h=y,a.p=g,a.i=D,a.w=T)}else{for(D=a.w||0;o+u>D;D+=65535){var ne=D+65535;o>ne||(l[f/8|0]=u,ne=o),f=de(l,f+1,e.subarray(D,ne))}a.i=o}return se(c,0,0+re(f)+0)})(e,null==t.level?6:t.level,null==t.mem?i.ceil(1.5*i.max(8,i.min(13,i.log(e.length)))):12+t.mem,0,0,s)})(e,this.o,0,0,this.s),t)},e.prototype.push=function(e,t){this.ondata||ie(5),this.s.l&&ie(4);var n=e.length+this.s.z;if(n>this.b.length){if(n>2*this.b.length-32768){var r=new U(-32768&n);r.set(this.b.subarray(0,this.s.z)),this.b=r}var s=this.b.length-this.s.z;s&&(this.b.set(e.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(e.subarray(s),32768),this.s.z=e.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(e,this.s.z),this.s.z+=e.length;this.s.l=1&t,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},e}(),me=function(){function e(e,t){"function"==typeof e&&(t=e,e={}),this.ondata=t;var n=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new U(32768),this.p=new U(0),n&&this.o.set(n)}return e.prototype.e=function(e){if(this.ondata||ie(5),this.d&&ie(4),this.p.length){if(e.length){var t=new U(this.p.length+e.length);t.set(this.p),t.set(e,this.p.length),this.p=t}}else this.p=e},e.prototype.c=function(e){this.s.i=+(this.d=e||!1);var t=this.s.b,n=((e,t,n)=>{var r=e.length;if(!r||t.f&&!t.l)return n||new U(0);var s=!n||2!=t.i,a=t.i;n||(n=new U(3*r));var o=e=>{var t=n.length;if(e>t){var r=new U(i.max(2*t,e));r.set(n),n=r}},c=t.f||0,l=t.p||0,u=t.b||0,f=t.l,h=t.d,d=t.m,p=t.n,w=8*r;do{if(!f){c=te(e,l,1);var g=te(e,l+1,3);if(l+=3,!g){var y=e[(T=re(l)+4)-4]|e[T-3]<<8,m=T+y;if(m>r){a&&ie(0);break}s&&o(u+y),n.set(e.subarray(T,m),u),t.b=u+=y,t.p=l=8*m,t.f=c;continue}if(1==g)f=J,h=$,d=9,p=5;else if(2==g){var b=te(e,l,31)+257,v=te(e,l+10,15)+4,S=b+te(e,l+5,31)+1;l+=14;for(var k=new U(S),R=new U(19),_=0;v>_;++_)R[L[_]]=te(e,l+3*_,7);l+=3*v;var z=ee(R),D=(1<<z)-1,x=j(R,z,1);for(_=0;S>_;){var T,E=x[te(e,l,D)];if(l+=15&E,16>(T=E>>4))k[_++]=T;else{var F=0,A=0;for(16==T?(A=3+te(e,l,3),l+=2,F=k[_-1]):17==T?(A=3+te(e,l,7),l+=3):18==T&&(A=11+te(e,l,127),l+=7);A--;)k[_++]=F}}var C=k.subarray(0,b),N=k.subarray(b);d=ee(C),p=ee(N),f=j(C,d,1),h=j(N,p,1)}else ie(1);if(l>w){a&&ie(0);break}}s&&o(u+131072);for(var I=(1<<d)-1,H=(1<<p)-1,M=l;;M=l){var q=(F=f[ne(e,l)&I])>>4;if((l+=15&F)>w){a&&ie(0);break}if(F||ie(2),256>q)n[u++]=q;else{if(256==q){M=l,f=null;break}var V=q-254;if(q>264){var Z=O[_=q-257];V=te(e,l,(1<<Z)-1)+P[_],l+=Z}var K=h[ne(e,l)&H],G=K>>4;if(K||ie(3),l+=15&K,N=B[G],G>3&&(Z=W[G],N+=ne(e,l)&(1<<Z)-1,l+=Z),l>w){a&&ie(0);break}s&&o(u+131072);var X=u+V;if(N>u){var Y=0-N,Q=i.min(N,X);for(0>Y+u&&ie(3);Q>u;++u)n[u]=undefined[Y+u]}for(;X>u;u+=4)n[u]=n[u-N],n[u+1]=n[u+1-N],n[u+2]=n[u+2-N],n[u+3]=n[u+3-N];u=X}}t.l=f,t.p=M,t.b=u,t.f=c,f&&(c=1,t.m=d,t.d=h,t.n=p)}while(!c);return u==n.length?n:se(n,0,u)})(this.p,this.s,this.o);this.ondata(se(n,t,this.s.b),this.d),this.o=se(n,this.s.b-32768),this.s.b=this.o.length,this.p=se(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),be=void 0!==v&&new v;try{be.decode(ge,{stream:!0})}catch(e){}function ve(e,t,r){return class{constructor(s){const a=this;var i,o;i=s,o="level",("function"==typeof n.hasOwn?n.hasOwn(i,o):i.hasOwnProperty(o))&&void 0===s.level&&delete s.level,a.codec=new e(n.assign({},t,s)),r(a.codec,(e=>{if(a.pendingData){const t=a.pendingData;a.pendingData=new d(t.length+e.length);const{pendingData:n}=a;n.set(t,0),n.set(e,t.length)}else a.pendingData=new d(e)}))}append(e){return this.codec.push(e),s(this)}flush(){return this.codec.push(new d,!0),s(this)}};function s(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new d}}const{Deflate:Se,Inflate:ke}=((e,t={},n)=>({Deflate:ve(e.Deflate,t.deflate,n),Inflate:ve(e.Inflate,t.inflate,n)}))({Deflate:ye,Inflate:me},void 0,((e,t)=>e.ondata=t)),Re=4294967295,_e=65535,ze=33639248,De=101075792,xe=void 0,Te="undefined",Ee="function";class Fe{constructor(e){return class extends _{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}let Ue=2;try{typeof E!=Te&&E.hardwareConcurrency&&(Ue=E.hardwareConcurrency)}catch(e){}const Ae={chunkSize:524288,maxWorkers:Ue,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:xe,CompressionStreamNative:typeof x!=Te&&x,DecompressionStreamNative:typeof T!=Te&&T},Ce=n.assign({},Ae);function Oe(){return Ce}function We(e){const{baseURL:n,chunkSize:r,maxWorkers:s,terminateWorkerTimeout:a,useCompressionStream:i,useWebWorkers:o,Deflate:c,Inflate:l,CompressionStream:u,DecompressionStream:f,workerScripts:d}=e;if(Le("baseURL",n),Le("chunkSize",r),Le("maxWorkers",s),Le("terminateWorkerTimeout",a),Le("useCompressionStream",i),Le("useWebWorkers",o),c&&(Ce.CompressionStream=new Fe(c)),l&&(Ce.DecompressionStream=new Fe(l)),Le("CompressionStream",u),Le("DecompressionStream",f),d!==xe){const{deflate:e,inflate:n}=d;if((e||n)&&(Ce.workerScripts||(Ce.workerScripts={})),e){if(!t.isArray(e))throw new h("workerScripts.deflate must be an array");Ce.workerScripts.deflate=e}if(n){if(!t.isArray(n))throw new h("workerScripts.inflate must be an array");Ce.workerScripts.inflate=n}}}function Le(e,t){t!==xe&&(Ce[e]=t)}const Ne=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;Ne[e]=t}class Ie{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^Ne[255&(t^e[n])];this.crc=t}get(){return~this.crc}}class Pe extends _{constructor(){let e;const t=new Ie;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new d(4);new g(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const He={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=He.getPartial(n);return 32===r?e.concat(t):He._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+He.getPartial(n)},clamp(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,i.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=He.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,getPartial:e=>i.round(e/1099511627776)||32,_shiftRight(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,a=He.getPartial(s);return r.push(He.partial(t+a&31,t+a>32?n:r.pop(),1)),r}},Me={bytes:{fromBits(e){const t=He.bitLength(e)/8,n=new d(t);let r;for(let s=0;t>s;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},toBits(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(He.partial(8*(3&n),r)),t}}},Be=class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=Me.utf8String.toBits(e));const n=t._buffer=He.concat(t._buffer,e),r=t._length,s=t._length=r+He.bitLength(e);if(s>9007199254740991)throw new h("Cannot hash more than 2^53 - 1 bits");const a=new w(n);let i=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);s>=e;e+=t.blockSize)t._block(a.subarray(16*i,16*(i+1))),i+=1;return n.splice(0,16*i),t}finalize(){const e=this;let t=e._buffer;const n=e._h;t=He.concat(t,[He.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(i.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}_f(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}_S(e,t){return t<<e|t>>>32-e}_block(e){const n=this,r=n._h,s=t(80);for(let t=0;16>t;t++)s[t]=e[t];let a=r[0],o=r[1],c=r[2],l=r[3],u=r[4];for(let e=0;79>=e;e++){16>e||(s[e]=n._S(1,s[e-3]^s[e-8]^s[e-14]^s[e-16]));const t=n._S(5,a)+n._f(e,o,c,l)+u+s[e]+n._key[i.floor(e/20)]|0;u=l,l=c,c=n._S(30,o),o=a,a=t}r[0]=r[0]+a|0,r[1]=r[1]+o|0,r[2]=r[2]+c|0,r[3]=r[3]+l|0,r[4]=r[4]+u|0}},qe={getRandomValues(e){const t=new w(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(i.random()>.5?1:-1))};for(let r,s=0;s<e.length;s+=4){const e=n(4294967296*(r||i.random()));r=987654071*e(),t[s/4]=4294967296*e()|0}return e}},Ve={importKey:e=>new Ve.hmacSha1(Me.bytes.toBits(e)),pbkdf2(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new h("invalid params to pbkdf2");const s=1+(r>>5)<<2;let a,i,o,c,l;const u=new ArrayBuffer(s),f=new g(u);let d=0;const p=He;for(t=Me.bytes.toBits(t),l=1;(s||1)>d;l++){for(a=i=e.encrypt(p.concat(t,[l])),o=1;n>o;o++)for(i=e.encrypt(i),c=0;c<i.length;c++)a[c]^=i[c];for(o=0;(s||1)>d&&o<a.length;o++)f.setInt32(d,a[o]),d+=4}return u.slice(0,r/8)},hmacSha1:class{constructor(e){const t=this,n=t._hash=Be,r=[[],[]];t._baseHash=[new n,new n];const s=t._baseHash[0].blockSize/32;e.length>s&&(e=(new n).update(e).finalize());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t._baseHash[0].update(r[0]),t._baseHash[1].update(r[1]),t._resultHash=new n(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}encrypt(e){if(this._updated)throw new h("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},Ze=void 0!==k&&"function"==typeof k.getRandomValues,Ke="Invalid password",je="Invalid signature",Ge="zipjs-abort-check-password";function Xe(e){return Ze?k.getRandomValues(e):qe.getRandomValues(e)}const Ye=16,Je={name:"PBKDF2"},Qe=n.assign({hash:{name:"HMAC"}},Je),$e=n.assign({iterations:1e3,hash:{name:"SHA-1"}},Je),et=["deriveBits"],tt=[8,12,16],nt=[16,24,32],rt=10,st=[0,0,0,0],at="undefined",it="function",ot=typeof k!=at,ct=ot&&k.subtle,lt=ot&&typeof ct!=at,ut=Me.bytes,ft=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const n=t._tables[0][4],r=t._tables[1],s=e.length;let a,i,o,c=1;if(4!==s&&6!==s&&8!==s)throw new h("invalid aes key size");for(t._key=[i=e.slice(0),o=[]],a=s;4*s+28>a;a++){let e=i[a-1];(a%s==0||8===s&&a%s==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],a%s==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),i[a]=i[a-s]^e}for(let e=0;a;e++,a--){const t=i[3&e?a:a-4];o[e]=4>=a||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],s=[],a=[];let i,o,c,l;for(let e=0;256>e;e++)a[(s[e]=e<<1^283*(e>>7))^e]=e;for(let u=i=0;!n[u];u^=o||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,n[u]=a,r[a]=u,l=s[c=s[o=s[u]]];let f=16843009*l^65537*c^257*o^16843008*u,h=257*s[a]^16843008*a;for(let n=0;4>n;n++)e[n][u]=h=h<<24^h>>>8,t[n][a]=f=f<<24^f>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}_crypt(e,t){if(4!==e.length)throw new h("invalid aes block size");const n=this._key[t],r=n.length/4-2,s=[0,0,0,0],a=this._tables[t],i=a[0],o=a[1],c=a[2],l=a[3],u=a[4];let f,d,p,w=e[0]^n[0],g=e[t?3:1]^n[1],y=e[2]^n[2],m=e[t?1:3]^n[3],b=4;for(let e=0;r>e;e++)f=i[w>>>24]^o[g>>16&255]^c[y>>8&255]^l[255&m]^n[b],d=i[g>>>24]^o[y>>16&255]^c[m>>8&255]^l[255&w]^n[b+1],p=i[y>>>24]^o[m>>16&255]^c[w>>8&255]^l[255&g]^n[b+2],m=i[m>>>24]^o[w>>16&255]^c[g>>8&255]^l[255&y]^n[b+3],b+=4,w=f,g=d,y=p;for(let e=0;4>e;e++)s[t?3&-e:e]=u[w>>>24]<<24^u[g>>16&255]<<16^u[y>>8&255]<<8^u[255&m]^n[b++],f=w,w=g,g=y,y=m,m=f;return s}},ht=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,n){let r;if(!(r=t.length))return[];const s=He.bitLength(t);for(let s=0;r>s;s+=4){this.incCounter(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return He.clamp(t,s)}},dt=Ve.hmacSha1;let pt=ot&&lt&&typeof ct.importKey==it,wt=ot&&lt&&typeof ct.deriveBits==it;class gt extends _{constructor({password:e,signed:t,encryptionStrength:r,checkPasswordOnly:s}){super({start(){n.assign(this,{ready:new m((e=>this.resolveReady=e)),password:e,signed:t,strength:r-1,pending:new d})},async transform(e,t){const n=this,{password:r,strength:a,resolveReady:i,ready:o}=n;r?(await(async(e,t,n,r)=>{const s=await bt(e,t,n,St(r,0,tt[t])),a=St(r,tt[t]);if(s[0]!=a[0]||s[1]!=a[1])throw new h(Ke)})(n,a,r,St(e,0,tt[a]+2)),e=St(e,tt[a]+2),s?t.error(new h(Ge)):i()):await o;const c=new d(e.length-rt-(e.length-rt)%Ye);t.enqueue(mt(n,e,c,0,rt,!0))},async flush(e){const{signed:t,ctr:n,hmac:r,pending:s,ready:a}=this;await a;const i=St(s,0,s.length-rt),o=St(s,s.length-rt);let c=new d;if(i.length){const e=Rt(ut,i);r.update(e);const t=n.update(e);c=kt(ut,t)}if(t){const e=St(kt(ut,r.digest()),0,rt);for(let t=0;rt>t;t++)if(e[t]!=o[t])throw new h(je)}e.enqueue(c)}})}}class yt extends _{constructor({password:e,encryptionStrength:t}){let r;super({start(){n.assign(this,{ready:new m((e=>this.resolveReady=e)),password:e,strength:t-1,pending:new d})},async transform(e,t){const n=this,{password:r,strength:s,resolveReady:a,ready:i}=n;let o=new d;r?(o=await(async(e,t,n)=>{const r=Xe(new d(tt[t]));return vt(r,await bt(e,t,n,r))})(n,s,r),a()):await i;const c=new d(o.length+e.length-e.length%Ye);c.set(o,0),t.enqueue(mt(n,e,c,o.length,0))},async flush(e){const{ctr:t,hmac:n,pending:s,ready:a}=this;await a;let i=new d;if(s.length){const e=t.update(Rt(ut,s));n.update(e),i=kt(ut,e)}r.signature=kt(ut,n.digest()).slice(0,rt),e.enqueue(vt(i,r.signature))}}),r=this}}function mt(e,t,n,r,s,a){const{ctr:i,hmac:o,pending:c}=e,l=t.length-s;let u;for(c.length&&(t=vt(c,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new d(t)).set(n,0)}return e})(n,l-l%Ye)),u=0;l-Ye>=u;u+=Ye){const e=Rt(ut,St(t,u,u+Ye));a&&o.update(e);const s=i.update(e);a||o.update(s),n.set(kt(ut,s),u+r)}return e.pending=St(t,u),n}async function bt(e,r,s,a){e.password=null;const i=(e=>{if(void 0===b){const t=new d((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new b).encode(e)})(s),o=await(async(e,t,n,r,s)=>{if(!pt)return Ve.importKey(t);try{return await ct.importKey("raw",t,n,!1,s)}catch(e){return pt=!1,Ve.importKey(t)}})(0,i,Qe,0,et),c=await(async(e,t,n)=>{if(!wt)return Ve.pbkdf2(t,e.salt,$e.iterations,n);try{return await ct.deriveBits(e,t,n)}catch(r){return wt=!1,Ve.pbkdf2(t,e.salt,$e.iterations,n)}})(n.assign({salt:a},$e),o,8*(2*nt[r]+2)),l=new d(c),u=Rt(ut,St(l,0,nt[r])),f=Rt(ut,St(l,nt[r],2*nt[r])),h=St(l,2*nt[r]);return n.assign(e,{keys:{key:u,authentication:f,passwordVerification:h},ctr:new ht(new ft(u),t.from(st)),hmac:new dt(f)}),h}function vt(e,t){let n=e;return e.length+t.length&&(n=new d(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function St(e,t,n){return e.subarray(t,n)}function kt(e,t){return e.fromBits(t)}function Rt(e,t){return e.toBits(t)}class _t extends _{constructor({password:e,passwordVerification:t,checkPasswordOnly:r}){super({start(){n.assign(this,{password:e,passwordVerification:t}),Tt(this,e)},transform(e,t){const n=this;if(n.password){const t=Dt(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new h(Ke);e=e.subarray(12)}r?t.error(new h(Ge)):t.enqueue(Dt(n,e))}})}}class zt extends _{constructor({password:e,passwordVerification:t}){super({start(){n.assign(this,{password:e,passwordVerification:t}),Tt(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=Xe(new d(12));t[11]=n.passwordVerification,r=new d(e.length+t.length),r.set(xt(n,t),0),s=12}else r=new d(e.length),s=0;r.set(xt(n,e),s),t.enqueue(r)}})}}function Dt(e,t){const n=new d(t.length);for(let r=0;r<t.length;r++)n[r]=Ft(e)^t[r],Et(e,n[r]);return n}function xt(e,t){const n=new d(t.length);for(let r=0;r<t.length;r++)n[r]=Ft(e)^t[r],Et(e,t[r]);return n}function Tt(e,t){const r=[305419896,591751049,878082192];n.assign(e,{keys:r,crcKey0:new Ie(r[0]),crcKey2:new Ie(r[2])});for(let n=0;n<t.length;n++)Et(e,t.charCodeAt(n))}function Et(e,t){let[n,r,s]=e.keys;e.crcKey0.append([t]),n=~e.crcKey0.get(),r=At(i.imul(At(r+Ut(n)),134775813)+1),e.crcKey2.append([r>>>24]),s=~e.crcKey2.get(),e.keys=[n,r,s]}function Ft(e){const t=2|e.keys[2];return Ut(i.imul(t,1^t)>>>8)}function Ut(e){return 255&e}function At(e){return 4294967295&e}const Ct="deflate-raw";class Ot extends _{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:a,useCompressionStream:i,zipCrypto:o,signed:c,level:l}=e,u=this;let f,h,d=Lt(super.readable);a&&!o||!c||(f=new Pe,d=Pt(d,f)),s&&(d=It(d,i,{level:l,chunkSize:t},r,n)),a&&(o?d=Pt(d,new zt(e)):(h=new yt(e),d=Pt(d,h))),Nt(u,d,(()=>{let e;a&&!o&&(e=h.signature),a&&!o||!c||(e=new g(f.value.buffer).getUint32(0)),u.signature=e}))}}class Wt extends _{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:s,encrypted:a,signed:i,signature:o,compressed:c,useCompressionStream:l}=e;let u,f,d=Lt(super.readable);a&&(s?d=Pt(d,new _t(e)):(f=new gt(e),d=Pt(d,f))),c&&(d=It(d,l,{chunkSize:t},r,n)),a&&!s||!i||(u=new Pe,d=Pt(d,u)),Nt(this,d,(()=>{if((!a||s)&&i){const e=new g(u.value.buffer);if(o!=e.getUint32(0,!1))throw new h(je)}}))}}function Lt(e){return Pt(e,new _({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function Nt(e,t,r){t=Pt(t,new _({flush:r})),n.defineProperty(e,"readable",{get:()=>t})}function It(e,t,n,r,s){try{e=Pt(e,new(t&&r?r:s)(Ct,n))}catch(r){if(!t)throw r;e=Pt(e,new s(Ct,n))}return e}function Pt(e,t){return e.pipeThrough(t)}const Ht="data",Mt="inflate";class Bt extends _{constructor(e,t){super({});const r=this,{codecType:s}=e;let a;s.startsWith("deflate")?a=Ot:s.startsWith(Mt)&&(a=Wt);let i=0;const o=new a(e,t),c=super.readable,l=new _({transform(e,t){e&&e.length&&(i+=e.length,t.enqueue(e))},flush(){const{signature:e}=o;n.assign(r,{signature:e,size:i})}});n.defineProperty(r,"readable",{get:()=>c.pipeThrough(o).pipeThrough(l)})}}const qt=typeof F!=Te;class Vt{constructor(e,{readable:t,writable:r},{options:s,config:a,streamOptions:i,useWebWorkers:o,transferStreams:c,scripts:l},u){const{signal:f}=i;return n.assign(e,{busy:!0,readable:t.pipeThrough(new Zt(t,i,a),{signal:f}),writable:r,options:n.assign({},s),scripts:l,transferStreams:c,terminate(){const{worker:t,busy:n}=e;t&&!n&&(t.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,u(e)}}),(o&&qt?Gt:jt)(e,a)}}class Zt extends _{constructor(e,{onstart:t,onprogress:n,size:r,onend:s},{chunkSize:a}){let i=0;super({start(){t&&Kt(t,r)},async transform(e,t){i+=e.length,n&&await Kt(n,i,r),t.enqueue(e)},flush(){e.size=i,s&&Kt(s,i)}},{highWaterMark:1,size:()=>a})}}async function Kt(e,...t){try{await e(...t)}catch(e){}}function jt(e,t){return{run:()=>(async({options:e,readable:t,writable:n,onTaskFinished:r},s)=>{const a=new Bt(e,s);try{await t.pipeThrough(a).pipeTo(n,{preventClose:!0,preventAbort:!0});const{signature:e,size:s}=a;return{signature:e,size:s}}finally{r()}})(e,t)}}function Gt(e,{baseURL:t,chunkSize:r}){return e.interface||n.assign(e,{worker:Jt(e.scripts[0],t,e),interface:{run:()=>(async(e,t)=>{let r,s;const a=new m(((e,t)=>{r=e,s=t}));n.assign(e,{reader:null,writer:null,resolveResult:r,rejectResult:s,result:a});const{readable:i,options:o,scripts:c}=e,{writable:l,closed:u}=(e=>{const t=e.getWriter();let n;const r=new m((e=>n=e));return{writable:new D({async write(e){await t.ready,await t.write(e)},close(){t.releaseLock(),n()},abort:e=>t.abort(e)}),closed:r}})(e.writable);Qt({type:"start",scripts:c.slice(1),options:o,config:t,readable:i,writable:l},e)||n.assign(e,{reader:i.getReader(),writer:l.getWriter()});const f=await a;try{await l.getWriter().close()}catch(e){}return await u,f})(e,{chunkSize:r})}}),e.interface}let Xt=!0,Yt=!0;function Jt(e,t,r){const s={type:"module"};let a,i;typeof e==Ee&&(e=e());try{a=new f(e,t)}catch(t){a=e}if(Xt)try{i=new F(a)}catch(e){Xt=!1,i=new F(a,s)}else i=new F(a,s);return i.addEventListener("message",(e=>(async({data:e},t)=>{const{type:r,value:s,messageId:a,result:i,error:o}=e,{reader:c,writer:l,resolveResult:u,rejectResult:f,onTaskFinished:p}=t;try{if(o){const{message:e,stack:t,code:r,name:s}=o,a=new h(e);n.assign(a,{stack:t,code:r,name:s}),w(a)}else{if("pull"==r){const{value:e,done:n}=await c.read();Qt({type:Ht,value:e,done:n,messageId:a},t)}r==Ht&&(await l.ready,await l.write(new d(s)),Qt({type:"ack",messageId:a},t)),"close"==r&&w(null,i)}}catch(o){w(o)}function w(e,t){e?f(e):u(t),l&&l.releaseLock(),p()}})(e,r))),i}function Qt(e,{worker:t,writer:n,onTaskFinished:r,transferStreams:s}){try{let{value:n,readable:r,writable:a}=e;const i=[];if(n&&(e.value=n.buffer,i.push(e.value)),s&&Yt?(r&&i.push(r),a&&i.push(a)):e.readable=e.writable=null,i.length)try{return t.postMessage(e,i),!0}catch(n){Yt=!1,e.readable=e.writable=null,t.postMessage(e)}else t.postMessage(e)}catch(e){throw n&&n.releaseLock(),r(),e}}let $t=[];const en=[];let tn=0;function nn(e){const{terminateTimeout:t}=e;t&&(clearTimeout(t),e.terminateTimeout=null)}const rn="HTTP error ",sn="HTTP Range not supported",an="Writer iterator completed too soon",on="GET",cn="bytes",ln=65536,un="writable";class fn{constructor(){this.size=0}init(){this.initialized=!0}}class hn extends fn{get readable(){const e=this,{chunkSize:t=ln}=e,n=new z({start(){this.chunkOffset=0},async pull(r){const{offset:s=0,size:a,diskNumberStart:o}=n,{chunkOffset:c}=this;r.enqueue(await Wn(e,s+c,i.min(t,a-c),o)),c+t>a?r.close():this.chunkOffset+=t}});return n}}class dn extends fn{constructor(){super();const e=this,t=new D({write:t=>e.writeUint8Array(t)});n.defineProperty(e,un,{get:()=>t})}writeUint8Array(){}}class pn extends hn{constructor(e){super(),n.assign(this,{blob:e,size:e.size})}async readUint8Array(e,t){const n=this,r=e+t,s=e||r<n.size?n.blob.slice(e,r):n.blob;let a=await s.arrayBuffer();return a.byteLength>t&&(a=a.slice(e,r)),new d(a)}}class wn extends fn{constructor(e){super();const t=new _,r=[];e&&r.push(["Content-Type",e]),n.defineProperty(this,un,{get:()=>t.writable}),this.blob=new u(t.readable,{headers:r}).blob()}getData(){return this.blob}}class gn extends hn{constructor(e,t){super(),mn(this,e,t)}async init(){await bn(this,xn,Rn),super.init()}readUint8Array(e,t){return vn(this,e,t,xn,Rn)}}class yn extends hn{constructor(e,t){super(),mn(this,e,t)}async init(){await bn(this,Tn,_n),super.init()}readUint8Array(e,t){return vn(this,e,t,Tn,_n)}}function mn(e,t,r){const{preventHeadRequest:s,useRangeHeader:a,forceRangeRequests:i}=r;delete(r=n.assign({},r)).preventHeadRequest,delete r.useRangeHeader,delete r.forceRangeRequests,delete r.useXHR,n.assign(e,{url:t,options:r,preventHeadRequest:s,useRangeHeader:a,forceRangeRequests:i})}async function bn(e,t,n){const{url:r,useRangeHeader:a,forceRangeRequests:i}=e;if((e=>{const{baseURL:t}=Oe(),{protocol:n}=new f(e,t);return"http:"==n||"https:"==n})(r)&&(a||i)){const{headers:r}=await t(on,e,Sn(e));if(!i&&r.get("Accept-Ranges")!=cn)throw new h(sn);{let a;const i=r.get("Content-Range");if(i){const e=i.trim().split(/\s*\/\s*/);if(e.length){const t=e[1];t&&"*"!=t&&(a=s(t))}}a===xe?await Dn(e,t,n):e.size=a}}else await Dn(e,t,n)}async function vn(e,t,n,r,s){const{useRangeHeader:a,forceRangeRequests:i,options:o}=e;if(a||i){const s=await r(on,e,Sn(e,t,n));if(206!=s.status)throw new h(sn);return new d(await s.arrayBuffer())}{const{data:r}=e;return r||await s(e,o),new d(e.data.subarray(t,t+n))}}function Sn(e,t=0,r=1){return n.assign({},kn(e),{Range:cn+"="+t+"-"+(t+r-1)})}function kn({options:e}){const{headers:t}=e;if(t)return Symbol.iterator in t?n.fromEntries(t):t}async function Rn(e){await zn(e,xn)}async function _n(e){await zn(e,Tn)}async function zn(e,t){const n=await t(on,e,kn(e));e.data=new d(await n.arrayBuffer()),e.size||(e.size=e.data.length)}async function Dn(e,t,n){if(e.preventHeadRequest)await n(e,e.options);else{const r=(await t("HEAD",e,kn(e))).headers.get("Content-Length");r?e.size=s(r):await n(e,e.options)}}async function xn(e,{options:t,url:r},s){const a=await fetch(r,n.assign({},t,{method:e,headers:s}));if(400>a.status)return a;throw 416==a.status?new h(sn):new h(rn+(a.statusText||a.status))}function Tn(e,{url:t},r){return new m(((s,a)=>{const i=new XMLHttpRequest;if(i.addEventListener("load",(()=>{if(400>i.status){const e=[];i.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((t=>{const n=t.trim().split(/\s*:\s*/);n[0]=n[0].trim().replace(/^[a-z]|-[a-z]/g,(e=>e.toUpperCase())),e.push(n)})),s({status:i.status,arrayBuffer:()=>i.response,headers:new c(e)})}else a(416==i.status?new h(sn):new h(rn+(i.statusText||i.status)))}),!1),i.addEventListener("error",(e=>a(e.detail?e.detail.error:new h("Network error"))),!1),i.open(e,t),r)for(const e of n.entries(r))i.setRequestHeader(e[0],e[1]);i.responseType="arraybuffer",i.send()}))}class En extends hn{constructor(e,t={}){super(),n.assign(this,{url:e,reader:t.useXHR?new yn(e,t):new gn(e,t)})}set size(e){}get size(){return this.reader.size}async init(){await this.reader.init(),super.init()}readUint8Array(e,t){return this.reader.readUint8Array(e,t)}}class Fn extends hn{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:t}=e;e.lastDiskNumber=0,e.lastDiskOffset=0,await m.all(t.map((async(n,r)=>{await n.init(),r!=t.length-1&&(e.lastDiskOffset+=n.size),e.size+=n.size}))),super.init()}async readUint8Array(e,t,n=0){const r=this,{readers:s}=this;let a,o=n;-1==o&&(o=s.length-1);let c=e;for(;c>=s[o].size;)c-=s[o].size,o++;const l=s[o],u=l.size;if(c+t>u){const s=u-c;a=new d(t),a.set(await Wn(l,c,s)),a.set(await r.readUint8Array(e+s,t-s,n),s)}else a=await Wn(l,c,t);return r.lastDiskNumber=i.max(o,r.lastDiskNumber),a}}class Un extends fn{constructor(e,t=4294967295){super();const r=this;let s,a,i;n.assign(r,{diskNumber:0,diskOffset:0,size:0,maxSize:t,availableSize:t});const o=new D({async write(t){const{availableSize:n}=r;if(i)t.length<n?await c(t):(await c(t.slice(0,n)),await l(),r.diskOffset+=s.size,r.diskNumber++,i=null,await this.write(t.slice(n)));else{const{value:n,done:o}=await e.next();if(o&&!n)throw new h(an);s=n,s.size=0,s.maxSize&&(r.maxSize=s.maxSize),r.availableSize=r.maxSize,await An(s),a=n.writable,i=a.getWriter(),await this.write(t)}},async close(){await i.ready,await l()}});async function c(e){const t=e.length;t&&(await i.ready,await i.write(e),s.size+=t,r.size+=t,r.availableSize-=t)}async function l(){a.size=s.size,await i.close()}n.defineProperty(r,un,{get:()=>o})}}async function An(e,t){e.init&&!e.initialized&&await e.init(t)}function Cn(e){return t.isArray(e)&&(e=new Fn(e)),e instanceof z&&(e={readable:e}),e}function On(e){e.writable===xe&&typeof e.next==Ee&&(e=new Un(e)),e instanceof D&&(e={writable:e});const{writable:t}=e;return t.size===xe&&(t.size=0),e instanceof Un||n.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}function Wn(e,t,n,r){return e.readUint8Array(t,n,r)}const Ln=Fn,Nn=Un,In="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split("");function Pn(e,t){return t&&"cp437"==t.trim().toLowerCase()?(e=>{{let t="";for(let n=0;n<e.length;n++)t+=In[e[n]];return t}})(e):new v(t).decode(e)}const Hn="filename",Mn="rawFilename",Bn="comment",qn="rawComment",Vn="uncompressedSize",Zn="compressedSize",Kn="offset",jn="diskNumberStart",Gn="lastModDate",Xn="rawLastModDate",Yn="lastAccessDate",Jn="creationDate",Qn=[Hn,Mn,Zn,Vn,Gn,Xn,Bn,qn,Yn,Jn,Kn,jn,jn,"internalFileAttribute","externalFileAttribute","msDosCompatible","zip64","directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class $n{constructor(e){Qn.forEach((t=>this[t]=e[t]))}}const er="File format is not recognized",tr="End of central directory not found",nr="End of Zip64 central directory not found",rr="End of Zip64 central directory locator not found",sr="Central directory header not found",ar="Local file header not found",ir="Zip64 extra field not found",or="File contains encrypted entry",cr="Encryption method not supported",lr="Compression method not supported",ur="Split zip file",fr="utf-8",hr="cp437",dr=[[Vn,Re],[Zn,Re],[Kn,Re],[jn,_e]],pr={[_e]:{getValue:_r,bytes:4},[Re]:{getValue:zr,bytes:8}};class wr{constructor(e,t,r){n.assign(this,{reader:e,config:t,options:r})}async getData(e,t,r={}){const a=this,{reader:i,offset:o,diskNumberStart:c,extraFieldAES:l,compressionMethod:u,config:f,bitFlag:p,signature:w,rawLastModDate:g,uncompressedSize:y,compressedSize:b}=a,v=t.localDirectory={},S=Dr(await Wn(i,o,30,c));let k=br(a,r,"password");if(k=k&&k.length&&k,l&&99!=l.originalCompressionMethod)throw new h(lr);if(0!=u&&8!=u)throw new h(lr);if(67324752!=_r(S,0))throw new h(ar);gr(v,S,4),v.rawExtraField=v.extraFieldLength?await Wn(i,o+30+v.filenameLength,v.extraFieldLength,c):new d,await yr(a,v,S,4,!0),n.assign(t,{lastAccessDate:v.lastAccessDate,creationDate:v.creationDate});const R=a.encrypted&&v.encrypted,_=R&&!l;if(R){if(!_&&l.strength===xe)throw new h(cr);if(!k)throw new h(or)}const z=o+30+v.filenameLength+v.extraFieldLength,x=b,T=i.readable;n.assign(T,{diskNumberStart:c,offset:z,size:x});const E=br(a,r,"signal"),F=br(a,r,"checkPasswordOnly");F&&(e=new D),e=On(e),await An(e,y);const{writable:U}=e,{onstart:A,onprogress:C,onend:O}=r,W={options:{codecType:Mt,password:k,zipCrypto:_,encryptionStrength:l&&l.strength,signed:br(a,r,"checkSignature"),passwordVerification:_&&(p.dataDescriptor?g>>>8&255:w>>>24&255),signature:w,compressed:0!=u,encrypted:R,useWebWorkers:br(a,r,"useWebWorkers"),useCompressionStream:br(a,r,"useCompressionStream"),transferStreams:br(a,r,"transferStreams"),checkPasswordOnly:F},config:f,streamOptions:{signal:E,size:x,onstart:A,onprogress:C,onend:O}};let L=0;try{({outputSize:L}=await(async(e,t)=>{const{options:n,config:r}=t,{transferStreams:a,useWebWorkers:i,useCompressionStream:o,codecType:c,compressed:l,signed:u,encrypted:f}=n,{workerScripts:h,maxWorkers:d,terminateWorkerTimeout:p}=r;t.transferStreams=a||a===xe;const w=!(l||u||f||t.transferStreams);let g;t.useWebWorkers=!w&&(i||i===xe&&r.useWebWorkers),t.scripts=t.useWebWorkers&&h?h[c]:[],n.useCompressionStream=o||o===xe&&r.useCompressionStream;const y=$t.find((e=>!e.busy));if(y)nn(y),g=new Vt(y,e,t,b);else if($t.length<d){const n={indexWorker:tn};tn++,$t.push(n),g=new Vt(n,e,t,b)}else g=await new m((n=>en.push({resolve:n,stream:e,workerOptions:t})));return g.run();function b(e){if(en.length){const[{resolve:t,stream:n,workerOptions:r}]=en.splice(0,1);t(new Vt(e,n,r,b))}else e.worker?(nn(e),s.isFinite(p)&&p>=0&&(e.terminateTimeout=setTimeout((()=>{$t=$t.filter((t=>t!=e)),e.terminate()}),p))):$t=$t.filter((t=>t!=e))}})({readable:T,writable:U},W))}catch(e){if(!F||e.message!=Ge)throw e}finally{const e=br(a,r,"preventClose");U.size+=L,e||U.locked||await U.getWriter().close()}return F?void 0:e.getData?e.getData():U}}function gr(e,t,r){const s=e.rawBitFlag=Rr(t,r+2),a=1==(1&s),i=_r(t,r+6);n.assign(e,{encrypted:a,version:Rr(t,r),bitFlag:{level:(6&s)>>1,dataDescriptor:8==(8&s),languageEncodingFlag:2048==(2048&s)},rawLastModDate:i,lastModDate:vr(i),filenameLength:Rr(t,r+22),extraFieldLength:Rr(t,r+24)})}async function yr(e,t,r,s,a){const{rawExtraField:i}=t,l=t.extraField=new c,u=Dr(new d(i));let f=0;try{for(;f<i.length;){const e=Rr(u,f),t=Rr(u,f+2);l.set(e,{type:e,data:i.slice(f+4,f+4+t)}),f+=4+t}}catch(e){}const p=Rr(r,s+4);n.assign(t,{signature:_r(r,s+10),uncompressedSize:_r(r,s+18),compressedSize:_r(r,s+14)});const w=l.get(1);w&&(((e,t)=>{t.zip64=!0;const n=Dr(e.data),r=dr.filter((([e,n])=>t[e]==n));for(let s=0,a=0;s<r.length;s++){const[i,o]=r[s];if(t[i]==o){const r=pr[o];t[i]=e[i]=r.getValue(n,a),a+=r.bytes}else if(e[i])throw new h(ir)}})(w,t),t.extraFieldZip64=w);const g=l.get(28789);g&&(await mr(g,Hn,Mn,t,e),t.extraFieldUnicodePath=g);const y=l.get(25461);y&&(await mr(y,Bn,qn,t,e),t.extraFieldUnicodeComment=y);const m=l.get(39169);m?(((e,t,r)=>{const s=Dr(e.data),a=kr(s,4);n.assign(e,{vendorVersion:kr(s,0),vendorId:kr(s,2),strength:a,originalCompressionMethod:r,compressionMethod:Rr(s,5)}),t.compressionMethod=e.compressionMethod})(m,t,p),t.extraFieldAES=m):t.compressionMethod=p;const b=l.get(10);b&&(((e,t)=>{const r=Dr(e.data);let s,a=4;try{for(;a<e.data.length&&!s;){const t=Rr(r,a),n=Rr(r,a+2);1==t&&(s=e.data.slice(a+4,a+4+n)),a+=4+n}}catch(e){}try{if(s&&24==s.length){const r=Dr(s),a=r.getBigUint64(0,!0),i=r.getBigUint64(8,!0),o=r.getBigUint64(16,!0);n.assign(e,{rawLastModDate:a,rawLastAccessDate:i,rawCreationDate:o});const c={lastModDate:Sr(a),lastAccessDate:Sr(i),creationDate:Sr(o)};n.assign(e,c),n.assign(t,c)}}catch(e){}})(b,t),t.extraFieldNTFS=b);const v=l.get(21589);v&&(((e,t,n)=>{const r=Dr(e.data),s=kr(r,0),a=[],i=[];n?(1==(1&s)&&(a.push(Gn),i.push(Xn)),2==(2&s)&&(a.push(Yn),i.push("rawLastAccessDate")),4==(4&s)&&(a.push(Jn),i.push("rawCreationDate"))):5>e.data.length||(a.push(Gn),i.push(Xn));let c=1;a.forEach(((n,s)=>{if(e.data.length>=c+4){const a=_r(r,c);t[n]=e[n]=new o(1e3*a);const l=i[s];e[l]=a}c+=4}))})(v,t,a),t.extraFieldExtendedTimestamp=v);const S=l.get(6534);S&&(t.extraFieldUSDZ=S)}async function mr(e,t,r,s,a){const i=Dr(e.data),o=new Ie;o.append(a[r]);const c=Dr(new d(4));c.setUint32(0,o.get(),!0);const l=_r(i,1);n.assign(e,{version:kr(i,0),[t]:Pn(e.data.subarray(5)),valid:!a.bitFlag.languageEncodingFlag&&l==_r(c,0)}),e.valid&&(s[t]=e[t],s[t+"UTF8"]=!0)}function br(e,t,n){return t[n]===xe?e.options[n]:t[n]}function vr(e){const t=(4294901760&e)>>16,n=65535&e;try{return new o(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}function Sr(e){return new o(s(e/a(1e4)-a(116444736e5)))}function kr(e,t){return e.getUint8(t)}function Rr(e,t){return e.getUint16(t,!0)}function _r(e,t){return e.getUint32(t,!0)}function zr(e,t){return s(e.getBigUint64(t,!0))}function Dr(e){return new g(e.buffer)}We({Inflate:ke}),e.BlobReader=pn,e.BlobWriter=wn,e.Data64URIReader=class extends hn{constructor(e){super();let t=e.length;for(;"="==e.charAt(t-1);)t--;const r=e.indexOf(",")+1;n.assign(this,{dataURI:e,dataStart:r,size:i.floor(.75*(t-r))})}readUint8Array(e,t){const{dataStart:n,dataURI:r}=this,s=new d(t),a=4*i.floor(e/3),o=atob(r.substring(a+n,4*i.ceil((e+t)/3)+n)),c=e-3*i.floor(a/4);for(let e=c;c+t>e;e++)s[e-c]=o.charCodeAt(e);return s}},e.Data64URIWriter=class extends dn{constructor(e){super(),n.assign(this,{data:"data:"+(e||"")+";base64,",pending:[]})}writeUint8Array(e){const t=this;let n=0,s=t.pending;const a=t.pending.length;for(t.pending="",n=0;n<3*i.floor((a+e.length)/3)-a;n++)s+=r.fromCharCode(e[n]);for(;n<e.length;n++)t.pending+=r.fromCharCode(e[n]);s.length>2?t.data+=R(s):t.pending=s}getData(){return this.data+R(this.pending)}},e.ERR_BAD_FORMAT=er,e.ERR_CENTRAL_DIRECTORY_NOT_FOUND=sr,e.ERR_ENCRYPTED=or,e.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=rr,e.ERR_EOCDR_NOT_FOUND=tr,e.ERR_EOCDR_ZIP64_NOT_FOUND=nr,e.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=ir,e.ERR_HTTP_RANGE=sn,e.ERR_INVALID_PASSWORD=Ke,e.ERR_INVALID_SIGNATURE=je,e.ERR_ITERATOR_COMPLETED_TOO_SOON=an,e.ERR_LOCAL_FILE_HEADER_NOT_FOUND=ar,e.ERR_SPLIT_ZIP_FILE=ur,e.ERR_UNSUPPORTED_COMPRESSION=lr,e.ERR_UNSUPPORTED_ENCRYPTION=cr,e.HttpRangeReader=class extends En{constructor(e,t={}){t.useRangeHeader=!0,super(e,t)}},e.HttpReader=En,e.Reader=hn,e.SplitDataReader=Fn,e.SplitDataWriter=Un,e.SplitZipReader=Ln,e.SplitZipWriter=Nn,e.TextReader=class extends pn{constructor(e){super(new y([e],{type:"text/plain"}))}},e.TextWriter=class extends wn{constructor(e){super(e),n.assign(this,{encoding:e,utf8:!e||"utf-8"==e.toLowerCase()})}async getData(){const{encoding:e,utf8:t}=this,r=await super.getData();if(r.text&&t)return r.text();{const t=new FileReader;return new m(((s,a)=>{n.assign(t,{onload:({target:e})=>s(e.result),onerror:()=>a(t.error)}),t.readAsText(r,e)}))}}},e.Uint8ArrayReader=class extends hn{constructor(e){super(),n.assign(this,{array:e,size:e.length})}readUint8Array(e,t){return this.array.slice(e,e+t)}},e.Uint8ArrayWriter=class extends dn{init(e=0){n.assign(this,{offset:0,array:new d(e)}),super.init()}writeUint8Array(e){const t=this;if(t.offset+e.length>t.array.length){const n=t.array;t.array=new d(n.length+e.length),t.array.set(n)}t.array.set(e,t.offset),t.offset+=e.length}getData(){return this.array}},e.Writer=dn,e.ZipReader=class{constructor(e,t={}){n.assign(this,{reader:Cn(e),options:t,config:Oe()})}async*getEntriesGenerator(e={}){const t=this;let{reader:r}=t;const{config:s}=t;if(await An(r),r.size!==xe&&r.readUint8Array||(r=new pn(await new u(r.readable).blob()),await An(r)),22>r.size)throw new h(er);r.chunkSize=(e=>i.max(e.chunkSize,64))(s);const a=await(async(e,t,n)=>{const r=new d(4);return Dr(r).setUint32(0,101010256,!0),await s(22)||await s(i.min(1048582,n));async function s(t){const s=n-t,a=await Wn(e,s,t);for(let e=a.length-22;e>=0;e--)if(a[e]==r[0]&&a[e+1]==r[1]&&a[e+2]==r[2]&&a[e+3]==r[3])return{offset:s+e,buffer:a.slice(e,e+22).buffer}}})(r,0,r.size);if(!a)throw 134695760==_r(Dr(await Wn(r,0,4)))?new h(ur):new h(tr);const o=Dr(a);let c=_r(o,12),l=_r(o,16);const f=a.offset,p=Rr(o,20),w=f+22+p;let g=Rr(o,4);const y=r.lastDiskNumber||0;let b=Rr(o,6),v=Rr(o,8),S=0,k=0;if(l==Re||c==Re||v==_e||b==_e){const e=Dr(await Wn(r,a.offset-20,20));if(117853008!=_r(e,0))throw new h(nr);l=zr(e,8);let t=await Wn(r,l,56,-1),n=Dr(t);const s=a.offset-20-56;if(_r(n,0)!=De&&l!=s){const e=l;l=s,S=l-e,t=await Wn(r,l,56,-1),n=Dr(t)}if(_r(n,0)!=De)throw new h(rr);g==_e&&(g=_r(n,16)),b==_e&&(b=_r(n,20)),v==_e&&(v=zr(n,32)),c==Re&&(c=zr(n,40)),l-=c}if(y!=g)throw new h(ur);if(0>l||l>=r.size)throw new h(er);let R=0,_=await Wn(r,l,c,b),z=Dr(_);if(c){const e=a.offset-c;if(_r(z,R)!=ze&&l!=e){const t=l;l=e,S=l-t,_=await Wn(r,l,c,b),z=Dr(_)}}const D=a.offset-l-(r.lastDiskOffset||0);if(c==D||0>D||(c=D,_=await Wn(r,l,c,b),z=Dr(_)),0>l||l>=r.size)throw new h(er);const x=br(t,e,"filenameEncoding"),T=br(t,e,"commentEncoding");for(let a=0;v>a;a++){const o=new wr(r,s,t.options);if(_r(z,R)!=ze)throw new h(sr);gr(o,z,R+6);const c=!!o.bitFlag.languageEncodingFlag,l=R+46,u=l+o.filenameLength,f=u+o.extraFieldLength,d=Rr(z,R+4),p=0==(0&d),w=_.subarray(l,u),g=Rr(z,R+32),y=f+g,b=_.subarray(f,y),D=c,E=c,F=p&&16==(16&kr(z,R+38)),U=_r(z,R+42)+S;n.assign(o,{versionMadeBy:d,msDosCompatible:p,compressedSize:0,uncompressedSize:0,commentLength:g,directory:F,offset:U,diskNumberStart:Rr(z,R+34),internalFileAttribute:Rr(z,R+36),externalFileAttribute:_r(z,R+38),rawFilename:w,filenameUTF8:D,commentUTF8:E,rawExtraField:_.subarray(u,f)});const[A,C]=await m.all([Pn(w,D?fr:x||hr),Pn(b,E?fr:T||hr)]);n.assign(o,{rawComment:b,filename:A,comment:C,directory:F||A.endsWith("/")}),k=i.max(U,k),await yr(o,o,z,R+6);const O=new $n(o);O.getData=(e,t)=>o.getData(e,O,t),R=y;const{onprogress:W}=e;if(W)try{await W(a+1,v,new $n(o))}catch(e){}yield O}const E=br(t,e,"extractPrependedData"),F=br(t,e,"extractAppendedData");return E&&(t.prependedData=k>0?await Wn(r,0,k):new d),t.comment=p?await Wn(r,f+22,p):new d,F&&(t.appendedData=w<r.size?await Wn(r,w,r.size-w):new d),!0}async getEntries(e={}){const t=[];for await(const n of this.getEntriesGenerator(e))t.push(n);return t}async close(){}},e.configure=We,e.getMimeType=()=>"application/octet-stream",e.initReader=Cn,e.initStream=An,e.initWriter=On,e.readUint8Array=Wn,e.terminateWorkers=()=>{$t.forEach((e=>{nn(e),e.terminate()}))},n.defineProperty(e,"__esModule",{value:!0})}));
